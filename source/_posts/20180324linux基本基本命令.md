---
title: linux基本基本命令
toc: true
author: shangrila-kun
date: 2018-03-24 18:52:47
tags: linux基本命令
categories: 运维
---

​	学号linux不是一件一蹴而就的事情，一定要坚持坚持再坚持。自己每每感觉学习linux是一个长期的过程，很耗时间，本文主要记载在学习中一些命令的使用及介绍，以供自己温故而知新。

<!-- more -->

## vim的使用技巧

**编辑文档操作**

> x:删除光标当前字符
> dd:删除一行
> ndd:删除n行（n为数字）
> d$删除光标至行尾。
> u:撤销上一步操作，可以多次使用，如输入两个u，表示撤销2步。
> rx:将当前光标字符替换为x
> yy:复制当前行。
> p:粘贴至当前行之后。
> P：粘贴至当前行之前。
> J:删除换行符，可以将两行合并为一行。
> VIM查找与替换
> /host,从上望下查。 /?关键词从下往上查。
> ：1,$s/xxx/yyy/ 将从第一行至尾行内的xxx替换成yyy。
> ：s/root/admin/ 将光标当前行中第一个出现root替换为admin
> ：s/root/admin/g 将当前行中所有的root替换为admin
> ：3,5 s/sbin/bin/g将3到5行之间的所有sbin替换为bin

**vim光标操作**

> h:光标向左移动一位
> j:光标向下移动一行（以回车为换行符）
> k:光标向上移动一行。
> l:光标向右移动一行。
> gg:光标移动至文件首行。
> G：光标移动至文件末尾。
> nG:移动光标至n行。
> ^:光标移动至当前行的首字符。
> $:光标移动至行前行的尾字符。
> fx:光标移至当前行的下一个x字符处。
> Fx:光标移至当前行的上一个x字符处。
> W:光标向右移动一个单词。
> nw：光标向右移动n个单词。
> b:光标向左移动一个单词。
> nb：光标向左移动n个单词。

**vim保存与退出**

> ：q! 不保存并 ：wq 保存并退出  ：x 保存并退出 ：w 保存 
> ：w b.txt 另存为b.txt
>  :set ignorecase 查找时不区分大小写
> vim多窗口编辑
> ：split可以同一个文档的不同行。Ctrl+w+j跳转至上面一个窗口
> Ctrl+w+k跳转至下一个窗口。
> ：split second.txt 打开新的文件。

## ps aux|grep xxx详解

> 对进程进行监测和控制,首先必须要了解当前进程的情况,也就是需要查看当前进程, 而ps命令（Process Status）就是最基本同时也是非常强大的进程查看命令.使用该命令 可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等等.总之大部分信息都是可以通过执行该命令得到的。
>
> ps 为我们提供了进程的一次性的查看，它所提供的查看结果并不动态连续的；如果想对进程时间监控，应该用 top 工具。
>
> 如果直接用ps命令，会显示所有进程的状态，通常结合grep命令查看某进程的状态。

**grep**

> grep （global search regular expression(RE) and print out the line,全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。

~~~shell
 ps -aux|grep nginx
 root     25001  0.0  0.0 122036  1460 ?        Sl   02:00   0:34 /usr/local/middleware/Git_NTP_APQTS_Code_Mid_MIS/LL/application/bin
root     25003  2.8  8.1 3533580 316088 ?      Sl   02:00  29:34 /usr/local/java/jdk1.8.0_144/bin/java -Djava.util.logging.config.fi
root     25272  0.0  0.0 122036  1456 ?        Sl   02:06   0:34 /usr/local/middleware/Git_NTP_APQTS_Code_Mid_MIS_Simp/AGP/application/bin
~~~

> 运行 ps aux 的到如下信息：
>
>    ps aux
>
> USER    PID   %CPU %MEM VSZ   RSS TTY    STAT   START TIME COMMAND

> stat 中的参数意义如下：
>    D 不可中断 Uninterruptible（usually IO）
>    R 正在运行，或在队列中的进程
>    S 处于休眠状态
>    T 停止或被追踪
>    Z 僵尸进程
>    W 进入内存交换（从内核2.6开始无效）
>    X   死掉的进程
>
> < 高优先级
> n   低优先级
> s   包含子进程
>
> \+位于后台的进程组

### ps命令

> ps命令
>
> 要对进程进行监测和控制,首先必须要了解当前进程的情况,也就是需要查看当前进程,而ps命令就是最基本同时也是非常强大的进程查看命令.使用该命令可以确定有哪些**进程正在运行和运行的状态、进程是否结束、进程有没有僵尸、哪些进程占用了过多的资源等等**.总之大部分信息都是可以通过执行该命令得到的.
>
> ps命令最常用的还是用于监控后台进程的工作情况,因为后台进程是不和屏幕键盘这些标准输入/输出设备进行通信的,所以如果需要检测其情况,便可以使用ps命令了.
>
>  1）ps a 显示现行终端机下的所有程序，包括其他用户的程序。
>
> 2）ps -A 显示所有程序。
>
> 3）ps c 列出程序时，显示每个程序真正的指令名称，而不包含路径，参数或常驻服务的标示。
>
> 4）ps -e 此参数的效果和指定"A"参数相同。
>
> 5）ps e 列出程序时，显示每个程序所使用的环境变量。
>
> 6）ps f 用ASCII字符显示树状结构，表达程序间的相互关系。
>
> 7）ps -H 显示树状结构，表示程序间的相互关系。
>
> 8）ps -N 显示所有的程序，除了执行ps指令终端机下的程序之外。
>
> 9）ps s 采用程序信号的格式显示程序状况。
>
> 10）ps S 列出程序时，包括已中断的子程序资料。
>
> 11）ps -t<终端机编号> 　指定终端机编号，并列出属于该终端机的程序的状况。
>
> 12）ps u 　以用户为主的格式来显示程序状况。
>
> 13）ps x 　显示所有程序，不以终端机来区分。
>
> 最常用的方法是ps -aux,然后再利用一个管道符号导向到grep去查找特定的进程,然后再对特定的进程进行操作。

> linux上进程有5种状态:
>
> \1. 运行(正在运行或在运行队列中等待)
>
> \2. 中断(休眠中, 受阻, 在等待某个条件的形成或接受到信号)
>
> \3. 不可中断(收到信号不唤醒和不可运行, 进程必须等待直到有中断发生)
>
> \4. 僵死(进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放)
>
> \5. 停止(进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行)
>
>  
>
> ps工具标识进程的5种状态码:
>
> D 不可中断 uninterruptible sleep (usually IO)
>
> R 运行 runnable (on run queue)
>
> S 中断 sleeping
>
> T 停止 traced or stopped
>
> Z 僵死 a defunct (”zombie”) process
>
>  
>
> 注: 其它状态还包括W(无驻留页), <(高优先级进程), N(低优先级进程), L(内存锁页).
>
>  
>
> 使用ps格式输出来查看进程状态:
>
> ps -eo user,stat..,cmd
>
>  
>
> user 用户名
>
> uid 用户号
>
> pid 进程号
>
> ppid 父进程号
>
> size 内存大小, Kbytes字节.
>
> vsize 总虚拟内存大小, bytes字节(包含code+data+stack)
>
> share 总共享页数
>
> nice 进程优先级(缺省为0, 最大为-20)
>
> priority(pri) 内核调度优先级
>
> pmem 进程分享的物理内存数的百分比
>
> trs 程序执行代码驻留大小
>
> rss 进程使用的总物理内存数, Kbytes字节
>
> time 进程执行起到现在总的CPU暂用时间
>
> stat 进程状态
>
> cmd(args) 执行命令的简单格式