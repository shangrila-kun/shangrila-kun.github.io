---
title: lnmp安装
date: 2017-12-02 10:09:14
tags: linux
toc: true
categories: 软件安装
author: shangrila-kun
---

​	由于项目需要lnmp，linux、nginx 、mysql、php环境，每次一个个源码安装或者yum安装都稀里糊涂的安装好了，有时候还出现莫名奇怪的问题，于是在网上查找了，使用了军哥的脚本部署lnmp。[lnmg一键安装官网及问题解答](https://lnmp.org/install.html)

<!--more-->

## LNMP一键安装包介绍

### **LNMP一键安装包是什么?**

> LNMP一键安装包是一个用Linux Shell编写的可以为CentOS/RHEL/Fedora/Aliyun/Amazon、Debian/Ubuntu/Raspbian/DeepinServer/Mint Linux VPS或独立主机安装LNMP(Nginx/MySQL/PHP)、LNMPA(Nginx/MySQL/PHP/Apache)、LAMP(Apache/MySQL/PHP)生产环境的Shell程序。

### **我们为什么需要它?**

> 编译安装需要输入大量的命令，如果是配置生产环境需要耗费大量的时间。
> 不会Linux的站长或Linux新手想使用Linux作为生产环境……

### **它有什么优势和功能?**

> 无需一个一个的输入命令，无需值守，编译安装优化编译参数，提高性能，解决不必要的软件间依赖，特别针对配置自动优化。
>
> 支持自定义Nginx、PHP编译参数及网站和数据库目录、支持生成LetseEcrypt证书、LNMP模式支持多PHP版本、支持单独安装Nginx/MySQL/MariaDB/Pureftpd服务器，同时提供一些实用的辅助工具如：虚拟主机管理、FTP用户管理、Nginx、MySQL/MariaDB、PHP的升级、常用缓存组件Redis/Xcache等的安装、重置MySQL root密码、502自动重启、日志切割、SSH防护DenyHosts/Fail2Ban、备份等许多实用脚本。

### **如何获取它?**

> 你可以自由 [下载](https://lnmp.org/download.html) 并使用它在VPS或独立服务器上，做为真正的生产环境或测试环境。

### **我们为什么采用LNMP这种架构?**

> 采用Linux、PHP、MySQL的优点我们不必多说。
>
> Nginx是一个小巧而高效的Linux下的Web服务器软件，是由 Igor Sysoev 为俄罗斯访问量第二的 Rambler.ru 站点开发的，已经在一些俄罗斯的大型网站上运行多年，目前很多国内外的门户网站、行业网站也都在是使用Nginx，相当的稳定。
>
> Nginx相当的稳定、功能丰富、安装配置简单、低系统资源[…](https://lnmp.org/nginx.html)

## 安装教程

### 系统需求

> - CentOS/RHEL/Fedora/Debian/Ubuntu/Raspbian/Deepin Server/Aliyun/Amazon/Mint Linux发行版
> - 需要5GB以上硬盘剩余空间，MySQL 5.7,MariaDB 10至少9GB剩余空间
> - 需要128MB以上内存(如果为128MB的小内存VPS,Xen的需要有SWAP,OpenVZ的至少要有128MB以上的vSWAP或突发内存)，注意小内存请勿使用64位系统！
> - **安装MySQL 5.6或5.7及MariaDB 10必须1G以上内存!**。
> - VPS或服务器必须已经联网，且必须设置的是网络源不能是光盘源，同时VPS/服务器 DNS要正常！
> - Linux下区分大小写，输入命令时请注意！
> - CentOS 5,Debian 6及之前版本其官网已经结束支持无法使用！
>
> LNMP一键安装包 V1.4 已经在[Vultr](https://www.vpser.net/go/vultr)、[遨游主机](https://www.vpser.net/go/aoyohost)、[搬瓦工](https://www.vpser.net/go/bandwagonhost)、[PhotonVPS](https://www.vpser.net/go/photonvps)、[OneAsiahost新加坡VPS](https://www.vpser.net/go/oneasiahost)、[BudgetVM](https://www.vpser.net/go/budgetvm)、[DigitalOcean](https://www.vpser.net/go/digitalocean)、[LocVPS](https://www.vpser.net/go/locvps)、[Linode](https://www.vpser.net/go/linode)、[DiaHosting](https://www.vpser.net/go/diahosting)、[KVMLA](https://www.vpser.net/go/kvmla)、[景文互联](https://www.vpser.net/go/jwdns)、[RamNode](https://www.vpser.net/go/ramnode)、[BuyVM](https://www.vpser.net/go/buyvm)、[80VPS](https://www.vpser.net/go/80vps)、[快易互联](https://www.vpser.net/go/kiiyi)、[阿里云](https://www.vpser.net/go/aliyun)等众多VPS的CentOS 6-7、RHEL 6-7、Fedora 21-23、Debian 7-9、Ubuntu 10.04-17.04的32位和64位系统上测试通过(CentOS 5,Debian 6及之前版本其官网已经结束支持无法使用,Debian9上Apache需选2.4.26版本以上，**深度/deepin只能使用服务器版,桌面版勿用！！**)。

### 安装步骤

> **1、使用putty或类似的SSH工具登陆VPS或服务器；**
>
> 登陆后运行：**screen -S lnmp**
>
> 如果提示screen: command not found 命令不存在可以执行：yum install screen 或 apt-get install screen安装，详细内容参考[screen教程](https://www.vpser.net/manage/run-screen-lnmp.html)。
>
> **2、下载并安装LNMP一键安装包：**
>
> 您可以选择使用下载版(推荐美国及海外VPS或空间较小用户使用)或者完整版(推荐国内VPS使用，国内用户可用在[下载](https://lnmp.org/download.html)中找国内下载地址替换)，两者没什么区别，只是完整版把一些需要的源码文件预先放到安装包里。**深度/deepin只能使用服务器版，桌面版请勿安装！！**
>
> 安装LNMP稳定版
> **wget -c http://soft.vpser.net/lnmp/lnmp1.4.tar.gz && tar zxf lnmp1.4.tar.gz && cd lnmp1.4 && ./install.sh lnmp**
>
>
> 默认安装lnmp可不写，如需要安装LNMPA或LAMP，将./install.sh 后面的参数替换为lnmpa或lamp即可。如需更改网站和数据库目录先修改安装包目录下的 lnmp.conf 文件。
>
> 如下载速度慢请更换其他下载节点，详情请看[下载页面](https://lnmp.org/download.html)。[LNMP下载节点具体替换方法](https://lnmp.org/faq/lnmp-download-source.html)。
>
> 运行上述LNMP安装命令后，会出现如下提示：
> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-1.png)
> 目前提供了较多的MySQL、MariaDB版本和不安装数据库的选项，需要**注意的是MySQL 5.6,5.7及MariaDB 10必须在1G以上内存的更高配置上才能选择**！
>
> 输入对应MySQL或MariaDB版本前面的序号，回车进入下一步.
>
> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-2.png)
> 需要设置MySQL的root密码（不输入直接回车将会设置为root）如果输入有错误需要删除时，可以按住Ctrl再按Backspace键进行删除(个别情况下是只需要Backspace键)。输入后回车进入下一步，如下图所示：
> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-3.png)
> 询问是否需要启用MySQL InnoDB，InnoDB引擎默认为开启，一般建议开启，直接回车或输入 y ，如果确定确实不需要该引擎可以输入 n，输入完成，回车进入下一步。
>
> 注意：选择PHP7等高版本时需要自行确认是否与自己的程序兼容。
> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-4.png)
> 输入要选择的PHP版本的序号，回车进入下一步，选择是否安装内存优化：
> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-5.png)
> 可以选择不安装、Jemalloc或TCmalloc，输入对应序号回车，直接回车为默认为不安装。
>
> 如果是LNMPA或LAMP的话还会提示![img](https://lnmp.org/images/1.4/lnmp1.4-install-6.png)“Please enter Administrator Email Address:”，需要设置管理员邮箱，该邮箱会在报错时显示在错误页面上。
>
> 再选择Apache版本
> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-7.png)
> 按提示输入对应版本前面的数字序号，回车。
>
> 提示"Press any key to install...or Press Ctrl+c to cancel"后，按回车键确认开始安装。 
> LNMP脚本就会自动安装编译Nginx、MySQL、PHP、phpMyAdmin、Zend Optimizer这几个软件。
>
> 安装时间可能会几十分钟到几个小时不等，主要是机器的配置网速等原因会造成影响。

## 安装完成效果

> 如果显示Nginx: OK，MySQL: OK，PHP: OK
> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-success.png)
> 并且Nginx、MySQL、PHP都是running，80和3306端口都存在，并提示安装使用的时间及Install lnmp V1.4 completed! enjoy it.的话，说明已经安装成功。
>
> 安装完成接下来开始使用就可以了，按[**添加虚拟主机教程**](https://lnmp.org/faq/lnmp-vhost-add-howto.html)，添加虚拟主机后可以使用[sftp](https://lnmp.org/faq/sftp.html)或[ftp服务器](https://lnmp.org/faq/ftpserver.html)上传网站代码，将域名解析到VPS或服务器的IP上，解析生效即可使用。

## 安装失败效果

> ![img](https://lnmp.org/images/1.4/lnmp1.4-install-failed.png)
> 如果出现类似上图的提示，有一个没安装成功表明安装失败！！需要用[winscp](http://www.vpser.net/manage/winscp.html)或其他类似工具，将/root目录下面的lnmp-install.log下载下来，到[LNMP支持论坛](http://bbs.vpser.net/forum-25-1.html)发帖注明你的系统发行版名称及版本号、32位还是64位等信息，并将lnmp-install.log压缩以附件形式上传到论坛，我们会通过日志查找错误，并给予相应的解决方法。
>
> 默认LNMP是不安装FTP服务器的，如需要FTP服务器：[https://lnmp.org/faq/ftpserver.html](https://lnmp.org/faq/ftpserver.html)
>
> 5、添加、删除虚拟主机及伪静态管理
>
> https://lnmp.org/faq/lnmp-vhost-add-howto.html
>
> 6、eAccelerator、xcache、memcached、imageMagick、ionCube、redis、opcache的安装
>
> https://lnmp.org/faq/addons.html
>
> 7、LNMP相关软件目录及文件位置
>
> https://lnmp.org/faq/lnmp-software-list.html
>
> 8、LNMP状态管理命令
>
> https://lnmp.org/faq/lnmp-status-manager.html



